<!DOCTYPE html>
<html lang="ru">
	<head>
		<meta charset="utf-8" />
		<link href="styles.css" rel="stylesheet" />
		<title>Тема 5</title>
	</head>
	<body>
		<table class="header">
			<tr>
				<td width="15%" align="center">
					<img src="images/logo_left.png" width="97" height="117" />
				</td>
				<td width="70%" align="center" valign="middle">
					<h1 align="center">Электронный ресурс по учебной дисциплине<br />"Введение в компьютерные системы и сети"<br />для специальности:<br />1–39 03 02 Программируемые мобильные системы</h1>
				</td>
				<td width="15%"></td>
			</tr>
			<tr>
				<td align="center" valign="middle" colspan="3">
					<a href="../index.html">Оглавление</a> | <a href="../Программа/program.html">Программа</a> | <a href="theory.html">Теория</a> | <a href="../Практика/practice.html">Практика</a> | <a href="../Контроль/test.html">Контроль знаний</a> | <a href="../Об авторах/author.html">Об авторах</a>
				</td>
			</tr>
		</table>
		
				<nav>
			<div class="header">
				<a href="../index.html">Оглавление</a>
			</div>
			<ul class="dd">
				<li>
					<a href="../Программа/program.html">Программа</a>
				</li>
				<li class="dir">
					<a href="../Теория/theory.html">Теория</a>
					<ul>
						<li class="dir">
							<a href="../Теория/introduction.html">Введение</a>
							<ul>
								<li>
									<a href="../Теория/introduction.html">Лекция 1</a>
								</li>
							</ul>
						</li>
						<li class="dir" title="Сети Ethernet и стек протоколов TCP/IP">
							<a href="../Теория/chapter_01.html">Раздел 1</a>
							<ul>
								<li class="dir" title="Сетевые протоколы и стандарты. Физический и канальный уровни">
									<a href="../Теория/chapter_01.html">Тема 1</a>
									<ul>
										<li>
											<a href="../Теория/chapter_01.html#lec2">Лекция 2</a>
										</li>
									</ul>
								</li>
								<li class="dir"
									title="Протоколы сетевого уровня. Сетевые коммутаторы и маршрутизаторы">
									<a href="../Теория/chapter_02.html">Тема 2</a>
									<ul>
										<li>
											<a href="../Теория/chapter_02.html#lec3">Лекция 3</a>
										</li>
									</ul>
								</li>
								<li class="dir" title="Протоколы TCP и UDP">
									<a href="../Теория/chapter_03.html">Тема 3</a>
									<ul>
										<li>
											<a href="../Теория/chapter_03.html#lec4">Лекция 4</a>
										</li>
									</ul>
								</li>
							</ul>
						</li>
						<li class="dir" title="Сетевая адресация">
							<a href="../Теория/chapter_04.html">Раздел 2</a>
							<ul>
								<li class="dir"
									title="Сетевые адреса IPv4 и IPv6">
									<a href="../Теория/chapter_04.html">Тема 4</a>
									<ul>
										<li>
											<a href="../Теория/chapter_04.html#lec5">Лекция 5</a>
										</li>
									</ul>
								</li>						

								<li class="dir" title="Организация подсетей сетей IPv4 и IPv6">
									<a href="../Теория/chapter_05.html">Тема 5</a>
									<ul>
										<li>
											<a href="../Теория/chapter_05.html#lec6">Лекция 6</a>
										</li>
										<li>
											<a href="../Теория/chapter_05.html#lec7">Лекция 7</a>
										</li>

									</ul>
								</li>
							</ul>
						</li>
						<li class="dir" title="Уровень приложений модели OSI">
							<a href="../Теория/chapter_06.html">Раздел 3</a>
							<ul>
								<li class="dir" title="Протоколы уровня приложения. Диагностика сети">
									<a href="../Теория/chapter_06.html">Тема 6</a>
									<ul>
										<li>
											<a href="../Теория/chapter_06.html#lec8">Лекция 8</a>
										</li>
									</ul>
								</li>
								<li class="dir"
									title="Основы обеспечения безопасности сети">
									<a href="../Теория/chapter_07.html">Тема 7</a>
									<ul>
										<li>
											<a href="../Теория/chapter_07.html#lec9">Лекция 9</a>
										</li>

									</ul>
								</li>
							</ul>
						</li>						
						
						<li>
							<a href="../Теория/literature.html">Литература</a>
						</li>
					</ul>
				</li>
				<li class="dir">
					<a href="../Практика/practice.html">Практика</a>
					<ul>
						<li class="dir">
							<a href="../Практика/practice.html">Лабораторные</a>
							<ul>
								<li>
									<a href="../Практика/lab_01.html">Работа №1</a>
								</li>
								<li>
									<a href="../Практика/lab_02.html">Работа №2</a>
								</li>
								<li>
									<a href="../Практика/lab_03.html">Работа №3</a>
								</li>
								<li>
									<a href="../Практика/lab_04.html">Работа №4</a>
								</li>
							</ul>
						</li>
						
						
					</ul>
				</li>
				<li>
					<a href="../Контроль/test.html">Контроль знаний</a>
				</li>
			</ul>
		</nav>
		
		
		
		<section>

			<h2>Тема 5. Организация подсетей сетей IPv4 и IPv6</h2>


		<a id="lec6"></a>
			<h3>Лекция 6</h3>		
<p>Проектирование, внедрение и управление эффективным планом IP-адресации обеспечивают надёжность и эффективность работы сетей. Это особенно актуально в случаях, когда увеличивается количество узлов сети. Понимание иерархической структуры IP-адреса и того, как изменить иерархию для повышения эффективности маршрутизации, является важной частью планирования схемы IP-адресации.</p>
		<p>В исходном IPv4-адресе существует два уровня иерархии: сеть и узел. Эти два уровня адресации делают возможной базовую группировку в сети, которая способствует маршрутизации пакетов в сеть назначения. Маршрутизатор пересылает пакеты, основываясь на сетевой части IP-адреса. После нахождения сети определяется целевое устройство по узловой части адреса.</p>
			<p>Однако по мере роста сети во многих организациях, когда к сети подключаются сотни и даже тысячи узлов, двухуровневая иерархия становится неэффективной.</p>
			<p>При разделении сети на подсети в иерархию сети фактически добавляются три уровня: сеть, подсеть и узел. При добавлении нового уровня иерархии в IP-сети создаются дополнительные подгруппы. Это позволяет ускорить доставку пакетов и обеспечить дополнительную фильтрацию, способствуя сокращению объёма «локального» трафика.</p>
			<p class="paragraph">Причины разбиения на подсети</p>
			<p>Ранее при развёртывании сети организации часто подключали все компьютеры и другие сетевые устройства к одной IP-сети. Всем устройствам в организации назначались IP-адреса с одинаковой сетевой частью. Конфигурация такого типа называется плоской архитектурой сети. В небольшой сети с небольшим количеством устройств плоская архитектура не представляет проблемы. Однако по мере расширения сети с такой конфигурацией могут возникнуть серьёзные трудности.</p>
			<p>Подумайте о том, как в сети Ethernet устройства выполняют поиск необходимых служб и устройств с помощью широковещательной рассылки. Как вы помните, широковещательное сообщение доставляется всем узлам данной сети. Протокол DHCP — пример сетевой службы, которая зависит от широковещательной рассылки. Устройства отправляют по сети широковещательные запросы, чтобы определить местонахождение DHCP-сервера. В крупной сети из-за этого может создаваться значительный трафик, который замедлит общую работу сети. Кроме того, поскольку широковещательная рассылка выполняется по всем устройствам, им необходимо принять и обработать трафик, что приводит к повышению требований к обработке. Если устройство должно обработать значительный объём широковещательных рассылок, это может даже привести к замедлению работы устройства. По этой причине более крупные сети необходимо разделить на более мелкие подсети, предназначенные для небольших групп устройств и служб.</p>
			<p>Процесс сегментации сети путём разделения её на несколько более мелких сетей называется разбиением на подсети. Эти более мелкие сети называются подсетями. Сетевые администраторы могут группировать устройства и службы в подсети по их географическому местоположению (например, 3-й этаж здания), организационному подразделению (например, отдел продаж) или по типу устройств (принтеры, серверы, глобальная сеть и т.п.) или по другому значимому для сети принципу. Разбиение на подсети может снизить общую нагрузку на сеть и повысить её производительность.</p>
			<p>Подсеть аналогична сети, и оба этих термина можно использовать как синонимы. Большинство сетей сами являются подсетями более крупных блоков адресов.</p>
			<p class="paragraph">Обмен данными между подсетями</p>
			<p>Маршрутизатор необходим для взаимодействия узлов из разных подсетей. Устройства в сети используют интерфейс маршрутизатора, подключённый к их локальной сети, в качестве шлюза по умолчанию. Трафик, отправляемый на устройство в удалённой сети, будет обработан маршрутизатором и отправлен в направлении сети назначения. Чтобы определить, является ли трафик локальным или удалённым, маршрутизатор использует маску подсети.</p>
			<p>В пространстве подсети этот механизм реализуется аналогичным образом. Как показано на рисунке, подсети образуют несколько логических сетей из одного блока адресов или сетевого адреса. Каждая подсеть рассматривается как отдельное сетевое пространство. Устройства в одной подсети должны использовать адрес, маску подсети и шлюз по умолчанию той подсети, которой они принадлежат.</p>
			<p>Трафик не может передаваться между подсетями без использования маршрутизатора. У каждого интерфейса маршрутизатора должен быть IPv4-адрес, принадлежащий сети или подсети, к которой подключён этот интерфейс.</p>
				<div class="image" style="margin:20px 0;">
				<a id="img5.1"></a>
				<img  align="center" src="images/img5.1.png" />
				<p>Рисунок 5.1 - Обмен данными между сетями</p>
			</div>
			<p>Как показано на рисунке 5.2, при планировании подсетей требуется учитывать требования организации к использованию сети и предполагаемую структуру подсетей. Для начала необходимо изучить требования к сети. Это означает, что нужно изучить всю сеть, определить её основные части и разделить их на сегменты. План распределения адресов содержит информацию о требуемом размере подсети, количестве узлов и принципе назначения адресов узлам. Кроме того, необходимо определить узлы, которым нужно выделить статические IP-адреса, и узлы, которые смогут получать сетевые настройки по протоколу DHCP.</p>	
			<div class="image" style="margin:20px 0;">
				<a id="img5.2"></a>
				<img  align="center" src="images/img5.2.png" />
				<p>Рисунок 5.2</p>
			</div>
			<p>Определяя размер подсети, необходимо оценить количество узлов, которым потребуются IP-адреса в каждой подсети в рамках разделённой частной сети. Например, при проектировании сети студенческого городка нужно оценить количество узлов в локальной сети администраторов, в локальной сети преподавателей и в локальной сети учащихся. В домашней сети можно оценить количество узлов в локальной сети жилой зоны и в локальной сети домашнего офиса.</p>
			<p>Как уже упоминалось ранее, диапазон частных IP-адресов, используемых в локальной сети, выбирается сетевым администратором, и к выбору этого диапазона следует отнестись с должным вниманием. Необходимо убедиться, что количества адресов будет достаточно для активных в данный момент узлов и для будущего расширения сети. </p>
			<p>На основании требований к IP-адресам можно определить диапазон или диапазоны узлов для развёртывания. После разбиения выбранного пространства частных IP-адресов на подсети будут получены адреса узлов, соответствующие требованиям к сети.</p>
			<p>Публичные адреса, используемые для подключения к Интернету, обычно выделяются оператором связи. Хотя в данном случае применяются те же принципы разбиения на подсети, это не всегда является обязанностью администратора сети организации.</p>
			<p>Два существенных фактора, влияющих на определение необходимого блока частных адресов, — это количество необходимых подсетей и максимальное количество узлов в каждой подсети. Каждый из этих блоков адресов позволит распределить узлы исходя из размера сети, количества узлов, активных в настоящий момент, или добавляемых в ближайшем будущем. Требования к IP-пространству определят диапазон или диапазоны используемых узлов.</p>
						<p class="paragraph">Базовое разбиение на подсети</p>
			<p>Каждый сетевой адрес содержит допустимый диапазон адресов узлов. Все устройства, подключённые к одной и той же сети, будут иметь IPv4-адрес узла этой сети, а также общую маску подсети или префикс сети.</p>	
			<p>Префикс и маска подсети — это разные способы представления одного и того же — сетевой части адреса.</p>
			<p>Для создания IPv4-подсетей мы задействуем один или нескольких бит из узловой части в качестве бит сетевой части. Для этого мы расширяем маску подсети. Чем больше заимствовано бит из узловой части, тем больше подсетей можно создать. Для каждого заимствованного бита количество доступных подсетей удваивается. Например, если заимствовать один бит, можно создать две подсети. Для двух бит — 4 подсети, для трёх бит — 8 подсетей и т. д. Однако с каждым заимствованным битом уменьшается количество адресов узлов в каждой подсети.</p>
			<p>Биты могут быть заимствованы только из узловой части адреса. Сетевая часть адреса выделяется оператором связи, и изменить её невозможно.</p>
			<p>Как показано на рисунке 5.3, сеть 192.168.1.0/24 имеет 24 бита в сетевой части и 8 бит в узловой части, что обозначено маской подсети 255.255.255.0 или записью с префиксом /24. Без разделения на подсети эта сеть поддерживает работу только с одним интерфейсом локальной сети. Если нужна дополнительная локальная сеть, основную сеть нужно разделить на подсети.</p>
			<div class="image" style="margin:20px 0;">
				<a id="img5.3"></a>
				<img  align="center" src="images/img5.3.png" />
				<p>Рисунок 5.3</p>
			</div>
			<p>На рисунке 5.4 в самом старшем разряде (крайний левый бит) заимствуется 1 бит в узловой части, расширяя сеть до 25 бит. При этом создаются две подсети: первая определяется цифрой 0 в заимствованном бите, а вторая — цифрой 1 в заимствованном бите. Для маски подсети обеих сетей используется цифра 1 в заимствованном бите, чтобы показать, что этот бит теперь входит в сетевую часть адреса.</p>
			<div class="image" style="margin:20px 0;">
				<a id="img5.4"></a>
				<img  align="center" src="images/img5.4.png" />
				<p>Рисунок 5.4</p>
			</div>
			<p>Как показано на рисунке 5.5, если преобразовать двоичный октет в десятичный формат, мы увидим, что адрес первой подсети — 192.168.1.0, а адрес второй подсети — 192.168.1.128. Поскольку был заимствован бит, маска подсети для каждой подсети будет 255.255.255.128 или /25.</p>
			<div class="image" style="margin:20px 0;">
				<a id="img5.5"></a>
				<img  align="center" src="images/img5.5.png" />
				<p>Рисунок 5.5</p>
			</div>
			<p>В примере выше сеть 192.168.1.0/24 была разделена на две подсети:</p>
<ul>
<li>192.168.1.0/25</li>
<li>192.168.1.128/25</li>
</ul>	
	<p></p>
			<p>Обратите внимание, что на рисунке 5.6 к интерфейсам GigabitEthernet маршрутизатора R1 подключены два сегмента локальной сети. Подсети будут использоваться для сегментов, подключённых к этим интерфейсам. Чтобы выполнять роль шлюза для устройств в локальной сети, каждому из интерфейсов маршрутизатора должен быть назначен IP-адрес в диапазоне допустимых адресов для назначенной подсети. В качестве адреса интерфейса маршрутизатора рекомендуется использовать первый или последний доступный адрес диапазона сети.</p>
			<p>Первая подсеть (192.168.1.0/25) используется для сети, подключённой к интерфейсу GigabitEthernet 0/0, а вторая подсеть (192.168.1.128/25) — к интерфейсу GigabitEthernet 0/1. Чтобы назначить IP-адрес каждому из этих интерфейсов, необходимо определить диапазон допустимых IP-адресов для каждой подсети.</p>
			<div class="image" style="margin:20px 0;">
				<a id="img5.6"></a>
				<img  align="center" src="images/img5.6.png" />
				<p>Рисунок 5.6</p>
			</div>
			<p>Ниже даны рекомендации для каждой из подсетей.</p>
			<ul>
			<li><b>Сетевой адрес</b> — все биты 0 в узловой части адреса.</li>
			<li><b>Адрес первого узла</b> — все биты 0, а также крайний правый бит 1 в узловой части адреса.</li>
			<li><b>Адрес последнего узла</b> — все биты 1, а также крайний правый бит 0 в узловой части адреса.</li>
			<li><b>Широковещательный адрес</b> — все биты 1 в узловой части адреса.</li>
			</ul>
			<p>Как показано на рисунке 5.7, адрес первого узла в сети 192.168.1.0/25 — 192.168.1.1, а адрес последнего узла — 192.168.1.126. На рисунке 5.8 показано, что адрес первого узла в сети 192.168.1.128/25 — 192.168.1.129, а адрес последнего узла — 192.168.1.254.</p>
			<div class="image" style="margin:20px 0;">
				<a id="img5.7"></a>
				<img  align="center" src="images/img5.7.png" />
				<p>Рисунок 5.7</p>
			</div>
			<div class="image" style="margin:20px 0;">
				<a id="img5.8"></a>
				<img  align="center" src="images/img5.8.png" />
				<p>Рисунок 5.8</p>
			</div>
			<p>Чтобы назначить адрес первого узла в каждой подсети интерфейсу маршрутизатора для этой подсети, используйте команду ip address в режиме конфигурации интерфейса, как показано на рисунке 5.9. Обратите внимание, что для каждой подсети используется маска подсети 255.255.255.128, которая означает, что под сетевую часть адреса отведено 25 бит.</p>
			<div class="image" style="margin:20px 0;">
				<a id="img5.9"></a>
				<img  align="center" src="images/img5.9.png" />
				<p>Рисунок 5.9</p>
			</div>
			<p>Конфигурация узла для сети 192.168.1.128/25 показана на рисунке 5.10. Обратите внимание, что IP-адресом шлюза является адрес (192.168.1.129), настроенный на интерфейсе G0/1 маршрутизатора R1, а маской подсети является 255.255.255.128.</p>	
			<div class="image" style="margin:20px 0;">
				<a id="img5.10"></a>
				<img  align="center" src="images/img5.10.png" />
				<p>Рисунок 5.10</p>
			</div>
			<p class="paragraph">Разбиение на подсети на основе требований узлов</p>
			<p>Принятие решения о том, сколько бит в узловой части заимствовать для создания подсетей, является важным этапом планирования. При планировании подсетей следует рассмотреть два момента: количество адресов узлов, необходимых для каждой сети, и количество требуемых отдельных подсетей. На анимационном представлении показаны возможности подсети для сети 192.168.1.0. Выбор количества бит для идентификатора подсети влияет на количество возможных подсетей и количество адресов узлов в каждой из них.</p>
			<p>Обратите внимание на обратную зависимость между количеством подсетей и узлов в них. Чем больше бит заимствовано для создания подсетей, тем меньше останется бит в узловой части и, следовательно, тем меньше узлов будет доступно в каждой подсети. Если требуется больше узлов, значит, нужно больше бит в узловой части, что приводит к уменьшению количества подсетей.</p>
			<p>При заимствовании бит для создания нескольких подсетей у вас остаётся достаточно бит в узловой части для самой крупной подсети. Количество адресов узлов, необходимых в самой крупной подсети, определяет, сколько бит нужно оставить в узловой части адреса. Для расчёта количества адресов, которые будут доступны в каждой подсети, используется формула 2^n (где n — количество оставшихся бит в узловой части). Как вы помните, два адреса использовать нельзя, поэтому фактически количество доступных адресов рассчитывается как 2^n-2.</p>
			<div class="image" style="margin:20px 0;">
				<a id="img5.11"></a>
				<img  align="center" src="images/img5.11.png" />
				<p>Рисунок 5.11</p>
			</div>
			<p class="paragraph">Разбиение на подсети на основе требований сетей</p>
			<p>Иногда требуется конкретное количество подсетей, а количество адресов узлов в каждой подсети менее важно. Например, в организации может потребоваться разделить сетевой трафик согласно внутренней структуре или при настройке сети в подразделении. Например, организация может принять решение объединить в одну сеть все устройства, используемые специалистами технического отдела, а все устройства, используемые руководством, вынести в отдельную сеть. В этом случае количество подсетей имеет более высокий приоритет при определении количества бит для заимствования.</p>
			<p>Как вы помните, количество подсетей, создаваемых при заимствовании бит, можно рассчитать по формуле 2^n (где n — количество заимствованных бит). Вычитать какие-либо подсети нет необходимости, так как они все пригодны к использованию.</p>	
			<p>Ключевым моментом является соотношение количества необходимых подсетей и количества узлов, требуемых для самой крупной подсети. Чем больше бит было заимствовано для создания дополнительных подсетей, тем меньше узлов будет доступно в каждой из подсетей.</p>
			<div class="image" style="margin:20px 0;">
				<a id="img5.12"></a>
				<img  align="center" src="images/img5.12.png" />
				<p>Рисунок 5.12</p>
			</div>
			<p class="paragraph">Разбиение на подсети в соответствии с требованиями сетей</p>
			<p>Все сети в организации спроектированы таким образом, чтобы обеспечить работу конечного количества узлов. Для базового разбиения на подсети требуется достаточно подсетей для объединения сетей, что обеспечивает при этом нужное количество адресов в каждой подсети.</p>
			<p>В некоторых сетях, таких как каналы сети WAN класса «точка-точка», требуется только два узла. Другие сети, например локальная сеть пользователей в крупном здании или в отделе, могут содержать сотни узлов. Сетевые администраторы должны разработать схему межсетевой адресации, чтобы обеспечить максимальное количество узлов в каждой сети. Количество узлов в каждом подразделении должно иметь запас для увеличения в будущем.</p>
			<p>Сначала оцените общее количество узлов, необходимых для всей корпоративной объединённой сети. Необходимо использовать достаточно крупный блок адресов, который охватывает все устройства во всех корпоративных сетях. К таким устройствам относятся устройства конечных пользователей, сервера, промежуточные устройства и интерфейсы маршрутизатора.</p>
			<p>Рассмотрим пример корпоративной сетевой инфраструктуры, которая должна охватывать 123 узлов в пяти офисах (см. рис. 5.13). </p>
			<div class="image" style="margin:20px 0;">
				<a id="img5.13"></a>
				<img  align="center" src="images/img5.13.png" />
				<p>Рисунок 5.13</p>
			</div>
			<p>В этом примере оператор связи выделил сетевой адрес 172.20.0.0/21 (11 бит в узловой части). Как показано на рисунке 5.14, этот блок содержит 2,046 адреса узлов, которых хватает для обеспечения потребностей этой сетевой инфраструктуры.</p>	
			<div class="image" style="margin:20px 0;">
				<a id="img5.14"></a>
				<img  align="center" src="images/img5.14.png" />
				<p>Рисунок 5.14</p>
			</div>
			<p class="paragraph">Определение количества сетей и их размеров</p>
			<p>Далее следует проанализировать требуемое количество подсетей и количество адресов узлов, необходимых в каждой подсети. Если взять за основу топологию сети, содержащей 5 сегментов ЛВС и 4 соединения между маршрутизаторами, то потребуются 9 подсетей. Самая большая подсеть должна содержать 40 узлов. При проектировании схемы адресации необходимо заранее учесть увеличение как количества подсетей, так и узлов в подсетях.</p>
			<p>Сетевой адрес 172.16.0.0/22 имеет 10 битов в узловой части. Поскольку самой крупной подсети требуется 40 узлов, для обеспечения их адресации требуется не менее 6 битов в узловой части. Это число определяется по следующей формуле: 2^6 - 2 = 62 узла. Оставшиеся 4 бита в узловой части можно использовать для создания подсетей. По формуле определения количества подсетей получаем 16 подсетей: 2^4 = 16. Поскольку в нашем примере сетевой инфраструктуры требуются 9 подсетей, это соответствует нашим требованиям и обеспечивает некоторый запас для роста в будущем.</p>
			<p>Если заимствовать 4 бита, новая длина префикса будет /26 с маской подсети 255.255.255.192.</p>
			<p>Как показано на рисунке 5.15, длина префикса /26 позволяет определить 16 адресов подсетей. Увеличилась только часть подсети в адресе. Исходные 22 бита сетевого адреса нельзя изменить, а узловая часть будет содержать нулевые биты.</p>	
			<div class="image" style="margin:20px 0;">
				<a id="img5.15"></a>
				<img  align="center" src="images/img5.15.png" />
				<p>Рисунок 5.15</p>
			</div>
			<p>Как показано на рисунке 5.16, исходная сеть 172.16.0.0/22 была единой сетью, в которой используются 10 бит, обеспечивая 1022 пригодных к использованию адресов для назначения узлам. Путём заимствования 4 бит из узловой части можно создать 16 подсетей (от 0000 до 1111). В каждой подсети имеются 6 бит в узловой части или 62 пригодных к использованию адреса узлов.</p>
			<div class="image" style="margin:20px 0;">
				<a id="img5.16"></a>
				<img  align="center" src="images/img5.16.png" />
				<p>Рисунок 5.16</p>
			</div>
			<p>Как показано на рисунке 5.17, подсети можно назначить сегментам локальной сети и соединениям между маршрутизаторами.</p>
			<div class="image" style="margin:20px 0;">
				<a id="img5.17"></a>
				<img  align="center" src="images/img5.17.png" />
				<p>Рисунок 5.17</p>
			</div>
			<a id="lec7"></a>
			<h3>Лекция 7</h3>
			<p class="paragraph">Преимущества разбиения на подсети с использованием маски переменной длины</p>
			<p>В традиционном разбиении на подсети каждой подсети выделяется одинаковое количество адресов. Если все подсети имеют одинаковые требования к количеству узлов, такие блоки адресов фиксированного размера будут эффективными. Однако чаще всего требования отличаются.</p>
			<p>Например, в топологии, показанной на рисунке 5.18, используются семь подсетей: по одной для каждой из четырёх локальных сетей и по одной для каждого из трёх каналов сети WAN между маршрутизаторами. 			</p>	
			<div class="image" style="margin:20px 0;">
				<a id="img5.18"></a>
				<img  align="center" src="images/img5.18.png" />
				<p>Рисунок 5.18</p>
			</div>
			<p>В традиционном разбиении на подсети с указанным адресом 192.168.20.0/24 из узловой части в последнем октете можно позаимствовать три бита, чтобы обеспечить создание семи подсетей. Как показано на рисунке 5.19, при заимствовании трёх бит можно создать 8 подсетей, а оставшихся пяти бит в узловой части хватит для 30 адресов узлов в каждой подсети. В данной схеме создаются необходимые подсети, и она соответствует требованиям к узлам для самой крупной локальной вычислительной сети.</p>
			<div class="image" style="margin:20px 0;">
				<a id="img5.19"></a>
				<img  align="center" src="images/img5.19.png" />
				<p>Рисунок 5.19</p>
			</div>
			<p>Хотя это традиционное разбиение на подсети соответствует требованиям самой крупной ЛВС и делит адресное пространство на достаточное количество подсетей, в нём создаётся значительный объём неиспользуемых адресов.</p>
			<p>Например, в каждой подсети для каждого из трёх WAN-соединений нужны только два адреса. Поскольку в каждой подсети доступно по 30 адресов, 28 из них не будут использоваться. Как показано на рисунке 5.20, в результате мы получаем 84 неиспользуемых адреса (28x3).</p>
			<div class="image" style="margin:20px 0;">
				<a id="img5.20"></a>
				<img  align="center" src="images/img5.20.png" />
				<p>Рисунок 5.20</p>
			</div>
			<p>Кроме того, это ограничивает возможности для будущего роста, сокращая общее количество доступных подсетей. Такое неэффективное использование адресов характерно для традиционного разбиения на подсети с использованием классовых сетей.</p>
			<p>Применение традиционной схемы разбиения на подсети в данном варианте является неэффективным и бесполезным. Фактически, этот пример демонстрирует, как в процессе разбиения подсети на несколько подсетей можно максимально задействовать адресное пространство.</p>	
			<p>Разбиение подсети на несколько подсетей с использованием маски подсети переменной длины (VLSM) позволяет распределять гораздо меньше «лишних» адресов.</p>
			<p class="paragraph">Маски подсетей переменной длины (VLSM)</p>
			<p>Обратите внимание, что во всех предыдущих примерах разбиения на подсети ко всем подсетям применялась одна маска подсети. Это означает, что в каждой подсети доступно одинаковое количество адресов узлов.</p>
			<p>Как показано на рисунке 5.21, при традиционном разбиении на подсети создаются подсети одинакового размера. Во всех подсетях в традиционной схеме используется одна маска подсети.</p>
			<div class="image" style="margin:20px 0;">
				<a id="img5.21"></a>
				<img  align="center" src="images/img5.21.png" />
				<p>Рисунок 5.21</p>
			</div>
			<p>Как показано на рисунке 5.22, VLSM-маска позволяет разделить сетевое пространство на неравные части. VLSM-маска подсети может варьироваться в зависимости от количества бит, которые были заимствованы для конкретной подсети. Эти биты образуют «переменную» часть маски.</p>	
			<div class="image" style="margin:20px 0;">
				<a id="img5.22"></a>
				<img  align="center" src="images/img5.22.png" />
				<p>Рисунок 5.22</p>
			</div>
			<p>VLSM-разбиение на подсети похоже на традиционное тем, что в нём для создания подсетей заимствуются биты. Формулы расчёта количества возможных подсетей и количества узлов в каждой подсети также применимы. Различие состоит в том, что разбиение на подсети выполняется в несколько этапов. При использовании VLSM сеть сначала разбивается на подсети, а затем подсети снова делятся на подсети. Этот процесс может повторяться много раз для создания подсетей различного размера.</p>
			<p class="paragraph">Базовая модель VLSM</p>
			<p>В примере, показанном на рисунке 5.23, сеть 192.168.20.0/24 была разбита на восемь подсетей равного размера. Семь из восьми подсетей были выделены. Четыре подсети использовались для локальных сетей, а три подсети — для каналов сети WAN между маршрутизаторами. Как вы помните, в подсетях, используемых для каналов сети WAN, были неиспользуемые адреса, так как в этих подсетях нужны только два адреса — по одному для каждого интерфейса маршрутизатора. Чтобы предотвратить неэффективное использование адресов, с помощью VLSM можно создать более мелкие подсети для каналов сети WAN.</p>
			<div class="image" style="margin:20px 0;">
				<a id="img5.23"></a>
				<img  align="center" src="images/img5.23.png" />
				<p>Рисунок 5.23</p>
			</div>
			<p>Чтобы создать более мелкие подсети для каналов сети WAN, одна из подсетей будет разделена. На рисунке 5.24 последняя подсеть 192.168.20.224/27 будет дополнительно разбита на подсети.</p>
			<div class="image" style="margin:20px 0;">
				<a id="img5.24"></a>
				<img  align="center" src="images/img5.24.png" />
				<p>Рисунок 5.24</p>
			</div>
			<p>Как вы помните, если известно требуемое количество адресов узлов, можно использовать формулу 2^n-2 (где n — количество оставшихся бит в узловой части). Чтобы получить два доступных адреса, в его узловой части должны остаться два бита.</p>	
			<p>2^2 - 2 = 2</p>	
			<p>Поскольку в адресном пространстве 192.168.20.224/27 имеются 5 бит в узловой части, три бита можно позаимствовать, оставив 2 бита в узловой части.</p>
			<p>На данном этапе расчёты в точности совпадают с расчётами при традиционном разбиении на подсети. Биты заимствуются, определяя диапазоны подсетей.</p>
			<p>Cхема VLSM-разбиения на подсети уменьшает количество адресов в каждой подсети до подходящего размера соединений с глобальной сетью. Разбиение подсети 7 для сетей WAN оставляет доступными подсети 4, 5 и 6 для будущих сетей, а также для нескольких других подсетей для сетей WAN.</p>
			<p class="paragraph">VLSM на практике</p>
			<p>При использовании VLSM-подсетей для сегментов ЛВС и сети WAN можно выделить адреса без ненужной избыточности.</p>
			<p>Узлам во всех локальных сетях будет присвоен допустимый адрес узла в диапазоне этой подсети и с маской /27. У каждого из четырёх маршрутизаторов будет интерфейс локальной сети с подсетью /27, а также один или несколько последовательных интерфейсов с подсетью /30.</p>	
			<p>В стандартной схеме адресации IPv4-адрес первого узла в каждой подсети назначается LAN-интерфейсу маршрутизатора. WAN-интерфейсам маршрутизаторов назначаются IP-адреса и маска для подсетей /30.</p>
			<p>На рисунках с 5.25 по 5.28 показаны конфигурации интерфейсов для всех маршрутизаторов.</p>
			<div class="image" style="margin:20px 0;">
				<a id="img5.25"></a>
				<img  align="center" src="images/img5.25.png" />
				<p>Рисунок 5.25</p>
			</div>
			<div class="image" style="margin:20px 0;">
				<a id="img5.26"></a>
				<img  align="center" src="images/img5.26.png" />
				<p>Рисунок 5.26</p>
			</div>
			<div class="image" style="margin:20px 0;">
				<a id="img5.27"></a>
				<img  align="center" src="images/img5.27.png" />
				<p>Рисунок 5.27</p>
			</div>
			<div class="image" style="margin:20px 0;">
				<a id="img5.28"></a>
				<img  align="center" src="images/img5.28.png" />
				<p>Рисунок 5.28</p>
			</div>
			<p>Узлы в каждой подсети будут иметь IPv4-адрес из диапазона адресов этой подсети и соответствующую маску. Узлы будут использовать адрес подключённого LAN-интерфейса маршрутизатора в качестве шлюза по умолчанию.</p>
			<ul>
			<li>Узлы здания A (192.168.20.0/27) будут использовать адрес 192.168.20.1 маршрутизатора в качестве шлюза по умолчанию.</li>
			<li>Узлы здания B (192.168.20.32/27) будут использовать адрес 192.168.20.33 маршрутизатора в качестве шлюза по умолчанию.</li>
			<li>Узлы здания С (192.168.20.64/27) будут использовать адрес 192.168.20.65 маршрутизатора в качестве шлюза по умолчанию.</li>
			<li>Узлы здания D (192.168.20.96/27) будут использовать адрес 192.168.20.97 маршрутизатора в качестве шлюза по умолчанию.</li>
			</ul>
			<p>Выделение адресов можно также спланировать с помощью ряда способов. Одним из таких способов является определение доступных и назначенных блоков адресов с помощью схемы VLSM. Этот метод позволяет предотвратить назначение уже выделенных адресов. Например, для сети из предыдущего примера с помощью схемы VLSM можно спланировать назначение адресов.</p>
			<p class="paragraph">Особенности проектирования IPv6-сети</p>
			<p>Разбиение IPv6-сети на подсети подразумевает использование другого подхода, чем разбиение на подсети IPv4-сети. Основная причина заключается в том, что в IPv6 заложено огромное количество адресов. Поэтому разбиение на подсети полностью отличается от разбиения IPv4-сетей. Пространство IPv6-адресов разбивается не с целью экономии адресов, а для обеспечения иерархической логической структуры сети. Если IPv4-сети разбиваются на подсети в основном для борьбы с нехваткой адресов, то целью разбиения IPv6-сети на подсети является создание иерархии адресов на основе количества маршрутизаторов и обслуживаемых ими сетей.</p>	
			<p>Как вы помните, блок IPv6-адресов с префиксом /48 содержит 16 бит идентификатора подсети, как показано на рисунке 5.29. Разбиение на подсети с использованием 16 бит идентификатора подсети даёт 65 536 возможных подсетей /64. Поэтому нет необходимости заимствовать биты из идентификатора интерфейса или узловой части адреса. Каждая IPv6-подсеть /64 содержит примерно 18 квинтиллионов адресов, что, как очевидно, гораздо больше, чем когда-либо понадобится в одном сегменте IP-сети.</p>
			<div class="image" style="margin:20px 0;">
				<a id="img5.29"></a>
				<img  align="center" src="images/img5.29.png" />
				<p>Рисунок 5.29</p>
			</div>
			<p>Подсети, созданные из идентификатора подсети, легко представить, поскольку не нужно выполнять преобразование в двоичный формат. Чтобы определить следующую доступную подсеть, достаточно рассчитать следующее шестнадцатеричное число. Как показано на рисунке 5.30, необходимо применить расчёт части идентификатора подсети в шестнадцатеричной системе счисления.</p>
			<div class="image" style="margin:20px 0;">
				<a id="img5.30"></a>
				<img  align="center" src="images/img5.30.png" />
				<p>Рисунок 5.30</p>
			</div>
			<p>Префикс глобальной маршрутизации является одинаковым для всех подсетей. Для каждой подсети увеличивается только четырёхразрядный байт идентификатора подсети.</p>
			<p class="paragraph"> Распределение подсети IPv6</p>
			<p>Когда на выбор доступно 65 000 подсетей, задачей сетевого администратора становится проектирование логической структуры адресов в этой сети.</p>
			<p>Как показано на рисунке 5.31, в примере топологии потребуются подсети для каждой локальной сети, а также для канала сети WAN между маршрутизаторами R1 и R2. В отличие от примера для IPv4-сети IPv6-сеть с подсетью канала сети WAN не будет разбиваться на подсети. Хотя при этом могут остаться неиспользуемые адреса, что не является проблемой для IPv6-сетей.</p>
			<div class="image" style="margin:20px 0;">
				<a id="img5.31"></a>
				<img  align="center" src="images/img5.31.png" />
				<p>Рисунок 5.31</p>
			</div>
			<p>Как показано на рисунке 5.32, для данного примера будут выделены пять IPv6-подсетей с идентификаторами подсети от 0001 до 0005. Каждая подсеть /64 предоставит гораздо больше адресов, чем может когда-либо понадобиться.</p>
			<div class="image" style="margin:20px 0;">
				<a id="img5.32"></a>
				<img  align="center" src="images/img5.32.png" />
				<p>Рисунок 5.32</p>
			</div>
			<p>Как показано на рисунке 5.33, каждому сегменту ЛВС и каналу сети WAN назначается подсеть /64.</p>
			<div class="image" style="margin:20px 0;">
				<a id="img5.33"></a>
				<img  align="center" src="images/img5.33.png" />
				<p>Рисунок 5.33</p>
			</div>
			<p>Аналогично настройке IPv4, на рисунке 5.34 показано, что каждый интерфейс маршрутизатора был настроен как находящийся в другой IPv6-подсети.</p>
			<div class="image" style="margin:20px 0;">
				<a id="img5.34"></a>
				<img  align="center" src="images/img5.34.png" />
				<p>Рисунок 5.34</p>
			</div>
			<p class="paragraph">Разбиение на подсети с использованием идентификатора интерфейса</p>
			<p>В IPv6-сетях по аналогии с заимствованием бит из узловой части IPv4-адреса можно позаимствовать биты из идентификатора интерфейса для создания дополнительных IPv6-подсетей. Как правило, это делается по соображениям безопасности, чтобы уменьшить число узлов в подсети и создавать дополнительные подсети.</p>
			<p>При расширении идентификатора подсети путём заимствования бит из идентификатора интерфейса рекомендуется создавать подсеть на границе полубайта. </p>
			<p class="termin"><b>Полубайт</b> — это 4 бита или одна шестнадцатеричная цифра.</p></p>
			<p>Как показано на рисунке 5.35, префикс подсети /64 расширяется на четыре бита или один полубайт до подсети /68. Это позволяет уменьшить размер идентификатора на 4 бита (с 64 до 60).</p>
			<div class="image" style="margin:20px 0;">
				<a id="img5.35"></a>
				<img  align="center" src="images/img5.35.png" />
				<p>Рисунок 5.35</p>
			</div>
			<p>Разбиение на подсети по границе полубайта имеет значение только для масок подсетей, выровненных по полубайту. Начиная с /64, масками подсети, выровненными по полубайту, будут являться маски /68, /72, /76, /80 и т. д.</p>
			<p>Разбиение на подсети по границе полубайта позволяет создать подсети с использованием дополнительного шестнадцатеричного значения. В этом примере новый идентификатор подсети состоит из пяти шестнадцатеричных значений в диапазоне от 00000 до FFFFF.</p>
			<p>Можно создать подсеть в пределах полубайта, используя шестнадцатеричную цифру, однако это не рекомендуется и, кроме того, в этом нет необходимости. Разбиение на подсети в пределах полубайта сводит на нет преимущества быстрого определения префикса из идентификатора интерфейса. Например, если используется длина префикса /66, первые два бита были бы частью идентификатора подсети, а вторые два бита — частью идентификатора интерфейса.</p>
			
			
		</section>
	</body>
</html>
